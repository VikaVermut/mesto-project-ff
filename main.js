(()=>{"use strict";var e,t,r,n,o={386:(e,t,r)=>{r.d(t,{Lq:()=>l,QZ:()=>d,YB:()=>c,gm:()=>i,gw:()=>a,mj:()=>s,on:()=>u,wz:()=>o});var n={baseUrl:"https://nomoreparties.co/v1/wff-cohort-18",headers:{authorization:"9a72e160-d048-4d7c-be37-e3e7178de60e","Content-Type":"application/json"}},o=function(){return fetch(n.baseUrl+"/users/me",{headers:n.headers}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))})).catch((function(e){console.log(e)}))},a=function(e,t){return fetch(n.baseUrl+"/users/me",{method:"PATCH",headers:n.headers,body:JSON.stringify({name:e,about:t})}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))})).catch((function(e){console.log(e)}))},c=function(e){return fetch(n.baseUrl+"/users/me/avatar",{method:"PATCH",headers:n.headers,body:JSON.stringify({avatar:e})}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))})).catch((function(e){console.log(e)}))},u=function(){return fetch(n.baseUrl+"/cards",{headers:n.headers}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))})).catch((function(e){console.log(e)}))},i=function(e,t){return fetch(n.baseUrl+"/cards",{method:"POST",headers:n.headers,body:JSON.stringify({name:e,link:t})}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))})).catch((function(e){console.log(e)}))},l=function(e){return fetch(n.baseUrl+"/cards/"+e,{method:"DELETE",headers:n.headers}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))})).catch((function(e){console.log(e)}))},s=function(e){return fetch(n.baseUrl+"/cards/likes/"+e,{method:"PUT",headers:n.headers}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))})).catch((function(e){console.log(e)}))},d=function(e){return fetch(n.baseUrl+"/cards/likes/"+e,{method:"DELETE",headers:n.headers}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))})).catch((function(e){console.log(e)}))}},262:(e,t,r)=>{r.d(t,{GO:()=>c,io:()=>i,zY:()=>a});var n=r(386),o=document.querySelector("#card-template").content;function a(e,t,r,n,a,c,u){var i=o.querySelector(".card").cloneNode(!0);return i.id=e,i.querySelector(".card__image").src=r,i.querySelector(".card__title").textContent=t,i.querySelector(".card__image").alt=t,a&&(i.querySelector(".card__delete-button").classList.add("card__delete-button_visable"),i.querySelector(".card__delete-button").addEventListener("click",(function(){return a(i)}))),i.querySelector(".card__image").addEventListener("click",(function(){return u(r,t)})),i.querySelector(".card__like-button").addEventListener("click",(function(){return c(i)})),i.querySelector(".card__like-count").textContent=n.length,Boolean(n.find((function(e){return e._id===user._id})))?i.querySelector(".card__like-button").classList.add("card__like-button_is-active"):i.querySelector(".card__like-button").classList.remove("card__like-button_is-active"),i}function c(e){(0,n.Lq)(e.id).then((function(t){e.remove()}))}function u(e,t){var r=t.likes.length;Boolean(t.likes.find((function(e){return e._id===user._id})))?e.querySelector(".card__like-button").classList.add("card__like-button_is-active"):e.querySelector(".card__like-button").classList.remove("card__like-button_is-active"),e.querySelector(".card__like-count").textContent=r}function i(e){e.querySelector(".card__like-button").classList.contains("card__like-button_is-active")?(0,n.QZ)(e.id).then((function(t){return u(e,t)})):(0,n.mj)(e.id).then((function(t){return u(e,t)}))}},26:(e,t,r)=>{r.a(e,(async(e,t)=>{try{var n=r(262),o=r(195),a=r(763),c=r(386);function L(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=C(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,c=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return c=e.done,e},e:function(e){u=!0,a=e},f:function(){try{c||null==r.return||r.return()}finally{if(u)throw a}}}}function E(e,t){return A(e)||j(e,t)||C(e,t)||w()}function w(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function C(e,t){if(e){if("string"==typeof e)return x(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?x(e,t):void 0}}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function j(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,c,u=[],i=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;i=!1}else for(;!(i=(n=a.call(r)).done)&&(u.push(n.value),u.length!==t);i=!0);}catch(e){l=!0,o=e}finally{try{if(!i&&null!=r.return&&(c=r.return(),Object(c)!==c))return}finally{if(l)throw o}}return u}}function A(e){if(Array.isArray(e))return e}var u=document.querySelector(".places__list"),i=document.querySelector(".popup_type_edit"),l=i.querySelector(".popup__form"),s=document.querySelector(".popup_type_change_avatar"),d=s.querySelector(".popup__form"),p=document.querySelector(".popup_type_new-card"),f=p.querySelector(".popup__form"),_=document.querySelector(".popup_type_image"),y={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible"};function O(e,t,r){document.querySelector(".profile__title").textContent=e,document.querySelector(".profile__description").textContent=t,document.querySelector(".profile__image").style.backgroundImage="url(".concat(r,")")}var m=E(await Promise.all([(0,c.wz)(),(0,c.on)()]),2),v=m[0],h=m[1];window.user=v,O(v.name,v.about,v.avatar);var b,S=L(h);try{for(S.s();!(b=S.n()).done;){var q=b.value,g=q.owner._id===v._id,k=(0,n.zY)(q._id,q.name,q.link,q.likes,g?n.GO:null,n.io,P);u.append(k)}}catch(I){S.e(I)}finally{S.f()}function P(e,t){var r=_.querySelector("img");r.src=e,r.alt=t,_.querySelector(".popup__caption").textContent=t,(0,o.qf)(_)}function U(e){e.preventDefault(),l.querySelector(".popup__button").textContent="Сохранение...";var t=l.querySelector('input[name="name"]'),r=l.querySelector('input[name="description"]');(0,c.gw)(t.value,r.value).then((function(e){O(e.name,e.about,e.avatar),(0,o.Oo)(i),l.querySelector(".popup__button").textContent="Сохранить"}))}function B(e){e.preventDefault(),f.querySelector(".popup__button").textContent="Сохранение...";var t=f.querySelector('input[name="place-name"]'),r=f.querySelector('input[name="link"]');(0,c.gm)(t.value,r.value).then((function(e){var t=(0,n.zY)(e._id,e.name,e.link,e.likes,n.GO,n.io,P);u.prepend(t),(0,o.Oo)(p),f.querySelector(".popup__button").textContent="Сохранить"}))}function T(e){e.preventDefault(),d.querySelector(".popup__button").textContent="Сохранение...";var t=d.querySelector('input[name="link"]');(0,c.YB)(t.value).then((function(e){O(e.name,e.about,e.avatar),(0,o.Oo)(s),d.querySelector(".popup__button").textContent="Сохранить"}))}l.addEventListener("submit",U),document.querySelector(".profile__edit-button").addEventListener("click",(function(){var e,t,r,n;e=l.querySelector(".popup__input_type_name"),t=l.querySelector(".popup__input_type_description"),r=document.querySelector(".profile__title").textContent,n=document.querySelector(".profile__description").textContent,e.value=r,t.value=n,(0,a.R)(l,y),(0,o.qf)(i)})),f.addEventListener("submit",B),document.querySelector(".profile__add-button").addEventListener("click",(function(){f.reset(),(0,a.R)(f,y),(0,o.qf)(p)})),document.querySelector(".profile__image").addEventListener("click",(function(){d.reset(),(0,a.R)(d,y),(0,o.qf)(s)})),d.addEventListener("submit",T),document.querySelectorAll(".popup").forEach((function(e){e.querySelector(".popup__close").addEventListener("click",(function(e){var t=e.target.closest(".popup");(0,o.Oo)(t)})),e.addEventListener("click",o.Us)})),(0,a.F)(y),t()}catch(z){t(z)}}),1)},195:(e,t,r)=>{function n(e){"Escape"===e.key&&a(document.querySelector(".popup_is-opened"))}function o(e){e.classList.add("popup_is-opened"),document.addEventListener("keydown",n)}function a(e){e.classList.remove("popup_is-opened"),document.removeEventListener("keydown",n)}function c(e){e.target.classList.contains("popup")&&a(e.target)}r.d(t,{Oo:()=>a,Us:()=>c,qf:()=>o})},763:(e,t,r)=>{function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}r.d(t,{F:()=>c,R:()=>a});var o=function(e,t){var r,n=e.target;n.validity.valid?function(e,t){e.classList.remove(t.inputErrorClass);var r=e.nextElementSibling;r.classList.remove(t.errorClass),r.textContent=""}(n,t):function(e,t,r){e.classList.add(t.inputErrorClass);var n=e.nextElementSibling;console.log(n),n.classList.contains("popup__error")&&(n.textContent=r,n.classList.add(t.errorClass))}(n,t,(r=n).required&&0===r.value.length&&r.dataset.errorEmpty?r.dataset.errorEmpty:r.minLength&&r.value.length<r.minLength&&r.dataset.errorMinLength?r.dataset.errorMinLength:r.pattern&&!new RegExp(r.pattern).test(r.value)&&r.dataset.errorPattern?r.dataset.errorPattern:r.validationMessage?r.validationMessage:void 0),function(e,t){var r=e.checkValidity(),n=e.querySelector(t.submitButtonSelector);n.disabled=!r,r?n.classList.remove(t.inactiveButtonClass):n.classList.add(t.inactiveButtonClass)}(n.closest(t.formSelector),t)};function a(e,t){var r=e.querySelector(t.submitButtonSelector);r.disabled=!0,r.classList.add(t.inactiveButtonClass),e.querySelectorAll(".popup__error").forEach((function(e){e.textContent="",e.classList.remove(t.errorClass)}))}function c(e){var t,r=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return n(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var o=0,a=function(){};return{s:a,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,u=!0,i=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return u=e.done,e},e:function(e){i=!0,c=e},f:function(){try{u||null==r.return||r.return()}finally{if(i)throw c}}}}(document.querySelectorAll(e.formSelector));try{for(r.s();!(t=r.n()).done;)t.value.querySelectorAll(e.inputSelector).forEach((function(t){return t.addEventListener("input",(function(t){return o(t,e)}))}))}catch(e){r.e(e)}finally{r.f()}}}},a={};function c(e){var t=a[e];if(void 0!==t)return t.exports;var r=a[e]={exports:{}};return o[e](r,r.exports,c),r.exports}e="function"==typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",t="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",r="function"==typeof Symbol?Symbol("webpack error"):"__webpack_error__",n=e=>{e&&e.d<1&&(e.d=1,e.forEach((e=>e.r--)),e.forEach((e=>e.r--?e.r++:e())))},c.a=(o,a,c)=>{var u;c&&((u=[]).d=-1);var i,l,s,d=new Set,p=o.exports,f=new Promise(((e,t)=>{s=t,l=e}));f[t]=p,f[e]=e=>(u&&e(u),d.forEach(e),f.catch((e=>{}))),o.exports=f,a((o=>{var a;i=(o=>o.map((o=>{if(null!==o&&"object"==typeof o){if(o[e])return o;if(o.then){var a=[];a.d=0,o.then((e=>{c[t]=e,n(a)}),(e=>{c[r]=e,n(a)}));var c={};return c[e]=e=>e(a),c}}var u={};return u[e]=e=>{},u[t]=o,u})))(o);var c=()=>i.map((e=>{if(e[r])throw e[r];return e[t]})),l=new Promise((t=>{(a=()=>t(c)).r=0;var r=e=>e!==u&&!d.has(e)&&(d.add(e),e&&!e.d&&(a.r++,e.push(a)));i.map((t=>t[e](r)))}));return a.r?l:c()}),(e=>(e?s(f[r]=e):l(p),n(u)))),u&&u.d<0&&(u.d=0)},c.d=(e,t)=>{for(var r in t)c.o(t,r)&&!c.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},c.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),c(26)})();